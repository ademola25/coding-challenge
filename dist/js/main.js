window.addEventListener("load",event=>{if(window.File&&window.FileReader&&window.FileList&&window.Blob){document.getElementById("file_input_id").addEventListener("change",handleFileSelect,!1);var dropZone=document.getElementById("dragAndDrop");dropZone.addEventListener("dragover",handleDragOver,!1),dropZone.addEventListener("drop",handleFileSelect,!1)}else alert("The File APIs are not fully supported in this browser.")}),handleFileSelect=(evt=>{var files;if(evt.stopPropagation(),evt.preventDefault(),evt.dataTransfer)files=evt.dataTransfer.files;else{if(!evt.target)return;files=evt.target.files}for(var output=[],allowedTypes=["ai","doc","jpg","pdf","png","psd","xls"],i=0;f=files[i];i++){var ext=f.name.split(".").pop();if(-1!==allowedTypes.indexOf(ext)){var div=document.createElement("div");div.className="input-container-"+i;var img=document.createElement("img");img.className="img-"+ext+" svg",img.src="/img/icon-file-"+ext+".svg";var status=document.createElement("img");status.id="status-"+i,status.className="status svg inprogress",status.src="/img/icon-close.svg";var li=document.createElement("li"),fileName=document.createElement("input");fileName.type="text",fileName.setAttribute("value",escape(f.name)),fileName.className="fileName-"+i,li.appendChild(fileName),div.appendChild(img),div.appendChild(li),div.appendChild(status),output.push(div.outerHTML)}else alert("These file extensions are not allowed in our File Uploader!")}document.getElementById("list").innerHTML="<ul>"+output.join("")+"</ul>",replaceSVG();var f,asyncArray=[];for(i=0;f=files[i];i++){asyncArray.push(function(i,f){return function(callback){var reader=new FileReader,li=document.querySelector(".input-container-"+i+" li"),status=document.getElementById("status-"+i),progressBar=document.createElement("div");progressBar.id="progress-bar-"+i,progressBar.className="progress_bar";var percent=document.createElement("div");percent.className="percent",progressBar.appendChild(percent),percent.style.width="0%",li.appendChild(progressBar),reader.onloadstart=function(e){progressBar.className="progress_bar loading"},reader.onload=function(e){percent.style.width="100%",percent.style.opacity="0",progressBar.className="progress_bar";var div=(status=document.getElementById(status.id)).parentElement;div.querySelector('[class^="fileName-"]').style.opacity=1,div.querySelector('[class^="img-"]').style.opacity=1,status.remove();var img=document.createElement("img");img.id=status.id,img.src="/img/icon-check.svg",img.className="status svg completed",div.appendChild(img),replaceSVG(),callback()},updateProgress=(evt=>{if(evt.lengthComputable){var percentLoaded=Math.round(evt.loaded/evt.total*100);percentLoaded<100&&(percent.style.width=percentLoaded+"%")}}),errorHandler=(evt=>{switch(evt.target.error.code){case evt.target.error.NOT_FOUND_ERR:alert("File Not Found!");break;case evt.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case evt.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}callback()}),reader.onerror=errorHandler,reader.onprogress=updateProgress,reader.readAsBinaryString(f)}}(i,f))}async.waterfall(asyncArray)}),replaceSVG=(()=>{jQuery("img.svg").each(function(){var $img=jQuery(this),imgID=$img.attr("id"),imgClass=$img.attr("class"),imgURL=$img.attr("src");jQuery.get(imgURL,function(data){var $svg=jQuery(data).find("svg");void 0!==imgID&&($svg=$svg.attr("id",imgID)),void 0!==imgClass&&($svg=$svg.attr("class",imgClass+" replaced-svg")),$svg=$svg.removeAttr("xmlns:a"),$img.replaceWith($svg)},"xml")})}),handleDragOver=(evt=>{evt.stopPropagation(),evt.preventDefault(),evt.dataTransfer.dropEffect="copy"});